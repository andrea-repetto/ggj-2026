[gd_scene format=3 uid="uid://dclxrpqm3f43c"]

[ext_resource type="Script" uid="uid://c0hg6w7kld3ix" path="res://scripts/player_input.gd" id="1_0ljut"]
[ext_resource type="Script" uid="uid://c183gv6cm4ty6" path="res://Character/character.gd" id="1_jgnii"]
[ext_resource type="Texture2D" uid="uid://cionp2eesxh5l" path="res://assets/sprites/character/ballerina-front-idle.png" id="2_jgnii"]
[ext_resource type="Texture2D" uid="uid://doxhqlep25o1" path="res://icon.svg" id="2_vbi5m"]
[ext_resource type="Texture2D" uid="uid://dt2ua1a8dqx85" path="res://RawImages/side dark Jolly Mask-modified.png" id="4_aetg1"]
[ext_resource type="Texture2D" uid="uid://b4hcbkqjdj88x" path="res://assets/sprites/character/ballerina-right-walk-01.png" id="4_tofhs"]
[ext_resource type="Texture2D" uid="uid://cu7nlpynf1063" path="res://assets/sprites/character/ballerina-right-walk-02.png" id="5_xsea5"]
[ext_resource type="Texture2D" uid="uid://tpr58fefk3e3" path="res://RawImages/dark Jolly front mask-modified.png" id="6_rh25e"]

[sub_resource type="SpriteFrames" id="SpriteFrames_aetg1"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("2_jgnii")
}],
"loop": true,
"name": &"IDLE",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("2_vbi5m")
}],
"loop": true,
"name": &"KILL",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("2_vbi5m")
}],
"loop": true,
"name": &"UNMASKED",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("4_tofhs")
}, {
"duration": 1.0,
"texture": ExtResource("5_xsea5")
}],
"loop": true,
"name": &"WALK_DOWN",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("4_tofhs")
}, {
"duration": 1.0,
"texture": ExtResource("5_xsea5")
}],
"loop": true,
"name": &"WALK_SIDE",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("4_tofhs")
}, {
"duration": 1.0,
"texture": ExtResource("5_xsea5")
}],
"loop": true,
"name": &"WALK_UP",
"speed": 5.0
}]

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_a8t6m"]
load_path = "res://.godot/imported/dark Jolly front mask-modified.png-663da6eed69c0b59087d687675aefe4e.ctex"

[sub_resource type="SpriteFrames" id="SpriteFrames_rh25e"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("CompressedTexture2D_a8t6m")
}],
"loop": true,
"name": &"IDLE",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("6_rh25e")
}],
"loop": true,
"name": &"WALK_DOWN",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("4_aetg1")
}],
"loop": true,
"name": &"WALK_SIDE",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("6_rh25e")
}],
"loop": true,
"name": &"WALK_UP",
"speed": 5.0
}]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_a8t6m"]
radius = 90.0
height = 270.0

[sub_resource type="CircleShape2D" id="CircleShape2D_jgnii"]
radius = 320.0

[sub_resource type="GDScript" id="GDScript_jgnii"]
script/source = "extends Node

@onready var interaction_range := $\"../InteractionRange\" as Area2D


func _physics_process(delta: float) -> void:
	if Input.is_action_just_pressed(\"interact\"):
		for area in interaction_range.get_overlapping_areas():
			if area.get_parent().is_in_group(\"guest\"):
				var guest := area.get_parent() as Guest
				if guest.current_state == Guest.GuestState.SEEKING_PARTNER:
					guest.dance_partner = get_parent()
					guest.sought_partner = null
					guest.current_state = Guest.GuestState.DANCING
					Global.guest_changed_state.emit(guest, Guest.GuestState.DANCING)
					Global.dancing_couple_formed.emit(get_parent(), guest)
"

[node name="Character" type="CharacterBody2D" unique_id=906381017 groups=["Bounceable"]]
motion_mode = 1
script = ExtResource("1_jgnii")

[node name="Body" type="AnimatedSprite2D" parent="." unique_id=1094185350]
scale = Vector2(0.25, 0.25)
sprite_frames = SubResource("SpriteFrames_aetg1")
animation = &"WALK_DOWN"

[node name="Head" type="AnimatedSprite2D" parent="." unique_id=1824791038]
position = Vector2(-5, -190)
scale = Vector2(0.1, 0.1)
sprite_frames = SubResource("SpriteFrames_rh25e")
animation = &"IDLE"

[node name="CollisionShape2D" type="CollisionShape2D" parent="." unique_id=2065306827]
shape = SubResource("CapsuleShape2D_a8t6m")

[node name="PlayerInput" type="Node" parent="." unique_id=1517145568]
script = ExtResource("1_0ljut")
metadata/_custom_type_script = "uid://c0hg6w7kld3ix"

[node name="InteractionRange" type="Area2D" parent="." unique_id=1041057857]
collision_layer = 2
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="InteractionRange" unique_id=1844824901]
shape = SubResource("CircleShape2D_jgnii")

[node name="GuestInteractor" type="Node" parent="." unique_id=1427989666]
script = SubResource("GDScript_jgnii")

[connection signal="area_entered" from="InteractionRange" to="." method="_on_interaction_range_area_entered"]
